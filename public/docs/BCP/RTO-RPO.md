# 서버 리커버리 & AWS DR 전략 실무 가이드

이 문서는 개발자를 위한 서버 리커버리(재해복구)와 AWS 기반 DR(Disaster Recovery) 전략을 개념, 필요성, 유형별 비교, 실제 AWS 구현 및 자동화까지 체계적으로 정리합니다.

---

## 1. 핵심 개념: RTO와 RPO

| 구분        | 설명 |
|-------------|-----------------------------------|
| **RTO (Recovery Time Objective)** | 장애 발생 후 서비스가 정상 가동까지 걸릴 수 있는 최대 허용 시간. 예: RTO가 1시간이면 최대 1시간 내 복구해야 함. |
| **RPO (Recovery Point Objective)**| 장애/복구 시점에서 최대 허용 가능한 데이터 손실 시간. 예: RPO가 15분이면 15분 내의 데이터만 복구 가능, 그 밖은 손실될 수 있음. |

RTO와 RPO는 모든 복구/백업 전략의 기준이 됩니다.

---

## 2. 서버 리커버리 전략의 필요성

비즈니스 운영에서 서버 리커버리 전략을 반드시 준비해야 하는 이유:

- **매출 손실:** 서비스 중단 시 직접적인 매출, 고객 결제 등 손실 발생
- **평판 손상:** 안정성 저하로 고객 이탈 및 브랜드 이미지 악화
- **규정 위반:** 데이터 관련 법규 미준수 시 법적 책임 및 벌금
- **고객 이탈:** 불안정한 서비스로 인한 신뢰도 하락

따라서, **재해복구계획(DRP)** 수립과 반복 테스트를 통해 위 문제들을 최소화해야 합니다.

---

## 3. 복구 시간(RTO)·데이터 손실(RPO) 목표의 실제 의미

- **짧은 RTO/RPO가 필요한 경우:**
  - 수익과 직결되는 서비스(전자상거래, 실시간 API 등)
  - 고가용성(HA) 도입: 페일오버, 클러스터링, 로드 밸런서 구축
  - DR 센터(핫/미러 사이트)를 항시 준비

- **긴 RTO/RPO가 허용되는 경우:**
  - 내부 업무, 테스트, 분석용 시스템
  - 비용 최적화를 위한 느린 복구 전략 적용

---

## 4. 복구 수준별 유형 비교 테이블

| 복구 유형       | 복구 시간(RTO) | 데이터 손실(RPO) | 비용    | 동기화 방식                | 특징                       |
|------------------|----------------|-------------------|--------|--------------------------|---------------------------|
| 미러 사이트      | 0초(즉시)      | 0초(실시간)       | 매우 높음 | Active-Active 실시간 복제 | 주센터와 실시간 동기화, 무중단 복구 |
| 핫 사이트        | 4시간 내       | 수시간            | 높음   | 동기/비동기 실시간 복제   | 대기 상태에서 장애 시 빠른 전환  |
| 웜 사이트        | 수일~수주      | 수시간~1일        | 중간   | 주기적 백업(비실시간)     | 최소 핵심자원만 보유, 복구에 시간 필요 |
| 콜드 사이트      | 수주~수개월    | 수일~수주         | 낮음   | 주기적 백업               | 데이터만 백업, 필요시 신규 조달  |

---

## 5. AWS를 통한 실무 전략

### 5-1. AWS에서 RTO·RPO 설정 모범 사례
- **서비스별 목표 차등화:** 중요도에 따라 RTO/RPO 목표를 개별 설정. 비즈니스 전략에 맞는 분류 필요
- **지속적 모니터링 및 알림:** CloudWatch로 백업/복구 진행 상황 모니터, SNS·EventBridge로 장애 즉시 알림
- **다계층 백업:** 리전 내 백업, S3/Glacier 등 장기보관, 멀티리전 복제 연계
- **자동화 기반 복구:** Lambda, Step Functions, CloudFormation 등을 활용해 복구·백업 프로세스 자동화 및 테스트

### 5-2. AWS 기반 DR 사이트 구성 비용 절감
- **콜드/웜 사이트 활용:** 항상 켜진 핫 사이트 대신, 필요시만 자원 활성화해 운영비 절감
- **스팟·예약 인스턴스:** DR용 EC2 인스턴스에 저비용 플랜(스팟은 저렴/언제든 삭제, 예약은 약정 할인) 혼합 활용
- **저비용 스토리지:** 장기 백업은 S3 Glacier/Deep Archive에 저장
- **Auto Scaling:** 평상시 최소 자원만, 장애 발생시 빠르게 확장

### 5-3. 서버 복구 테스트 체크리스트 & 자동화
- **체크리스트:**
  - 정상 백업 여부, 데이터 무결성, 복구 절차 문서화, 실제 복원 테스트, 장애 상황별 복원
  - 복구 시간 및 데이터 손실 목표 충족 여부 확인
- **자동화:**
  - AWS FIS(Fault Injection Simulator)로 장애 시뮬레이션 테스트
  - Lambda/Step Functions 활용 복구 프로세스 자동화, CloudWatch/SNS로 자동 보고

### 5-4. 백업과 멀티리전 복제 결합
- **조합 전략:**
  - 리전 내 정기 백업 + 중요 데이터는 S3 Cross-Region Replication(CRR)으로 자동 복제
  - CRR: 별도 리전으로 S3 버킷 동기화, 주요 데이터 보존
- **Aurora 글로벌 DB 등 활용:** 데이터베이스 역시 멀티리전 무중단 복구 가능하도록 구성
- **비용과 복구 요구에 따른 커스텀화:** 복제 주기·데이터 중요도별 정책 수립해 불필요한 고비용 방지

---

## 6. 실무 적용 참고사항

- **모든 DR 전략은 반복적 테스트 필요:** 실제 장애 상황 시 신속 실행 여부 반드시 검증
- **AWS IaC 도구(CloudFormation, Terraform 등)로 인프라 배포/복구 절차 코드화**
- **문서화 및 로그 관리 중요:** 모든 절차와 정책은 명확하게 기록 및 검토

---

## 7. 요약

서버 리커버리와 DR 전략 수립은 개발자 입장에서 기술적 안전망을 구축해 비즈니스 연속성과 신뢰성을 확보하는 데 필수적입니다. AWS의 다양한 리소스와 자동화, 멀티리전 지원 기능을 활용하여 복구 시간을 줄이고 데이터 손실을 최소화하는 전략을 설계하세요.

실무 적용시 복구 목표치(RTO/RPO)의 구체 선정, 백업 및 복구 프로세스 자동화, 비용평가, 정기 테스트의 반복이 핵심입니다.
